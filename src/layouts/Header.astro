---
const currentPath = Astro.url.pathname;
---

<header class="navbar">
  <div class="nav-left">
    <a href="/" class={currentPath === "/" ? "active" : ""}> Forside </a>
    <a href="/">Om mig</a>
    <a href="/">Priser</a>
    <a
      href="/listview"
      class={currentPath.startsWith("/listview") ? "active" : ""}
    >
      Produkter
    </a>
  </div>

  <a href="/" class="logo">
    <img src="/logos/logo-dark.svg" alt="Til forsiden" />
  </a>

  <div class="nav-right">
    <a href="/">Kurser</a>
    <a href="/">FAQ</a>
    <a href="https://konaktepebeauty.onlinebooq.dk/" target="_blank" class="cta"
      >Book tid</a
    >
  </div>

  <!-- BURGER -->
  <input type="checkbox" id="menu-toggle" />

  <label for="menu-toggle" class="burger">
    <span></span>
    <span></span>
    <span></span>
  </label>

  <!-- BURGER MENU -->
  <nav class="mobile-menu">
    <a href="/">Forside</a>
    <a href="/">Om mig</a>
    <a href="/priser">Priser</a>
    <a href="/listview">Produkter</a>
    <a href="/">Kurser</a>
    <a href="/">FAQ</a>
    <a href="https://konaktepebeauty.onlinebooq.dk/" target="_blank" class="cta"
      >Book tid</a
    >
  </nav>
</header>

<style>
  .navbar a.cta {
    font-family: "ArchivoNarrowRegular";
    font-weight: bolder;
  }
  .cta {
    padding: 0.75rem 2.2rem;
    text-decoration: none;
    border: 1px solid rgba(57, 39, 29, 1);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.18);
    transition:
      background 0.2s ease,
      color 0.2s ease;
  }
  .navbar a.cta:hover {
    background: rgba(57, 39, 29, 1);
    color: #f5eee6;
  }

  /* TIL CTA FARVESKIFT TIL VORES JS FUNKTION */
  .navbar.scrolled .cta {
    background: rgba(57, 39, 29, 1);
    color: #f5eee6;
    border-color: rgba(57, 39, 29, 1);
  }

  /* Får markeret border og fed skrift så vi ved hvor vi er */
  .navbar a.active {
    border-bottom: 2px solid rgba(57, 39, 29, 1);
    font-weight: bolder;
  }

  .navbar {
    background: rgba(244, 239, 233, 1);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.5rem 3rem;
    position: relative;
    font-family: "BuenardRegular";
  }

  /* får headeren til at være fast nå vi scroller ned */
  .navbar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    /* width: 100%; */

    /* så den ligger over hero */
    z-index: 9999;
    box-sizing: border-box;
  }

  .navbar a:hover {
    font-weight: bold;
    text-decoration: underline;
  }

  .nav-left,
  .nav-right {
    display: flex;
    align-items: center;
  }

  .navbar a {
    text-decoration: none;
    color: rgba(57, 39, 29, 1);
    font-size: 1rem;
    margin: 0 1rem;
  }

  .logo {
    display: flex;
    align-items: center;
  }

  .logo img {
    display: block;
    height: 60px;
    transition:
      transform 0.3s ease,
      filter 0.3s ease;
    cursor: pointer;
  }

  .logo img:hover {
    transform: scale(1.05);
  }

  /* BURGER */
  #menu-toggle {
    /* display: none; */
    position: absolute;
    opacity: 0;
    /* pointer-events: none; */
  }

  .burger {
    position: absolute;
    right: 1.5rem;
    z-index: 1001;
    display: none;
    flex-direction: column;
    gap: 5px;
    cursor: pointer;
  }

  .burger span {
    width: 25px;
    height: 2px;
    background: rgba(57, 39, 29, 1);
  }

  /* BURGER MENU */
  .mobile-menu {
    display: none;
    width: 100%;
    background: rgba(244, 239, 233, 1);
    flex-direction: column;
    align-items: center;
    padding: 2rem 0;
    gap: 1.5rem;

    position: fixed;
    top: 110px;
    left: 0;
    right: 0;
    z-index: 1000;
  }

  /* RESPONSIV */
  @media (max-width: 768px) {
    .nav-left,
    .nav-right {
      display: none;
    }

    .burger {
      display: flex;
      position: fixed;

      cursor: pointer;
    }
  }
</style>
<style is:global>
  @media (max-width: 768px) {
    #menu-toggle:checked ~ .mobile-menu {
      display: flex;
    }
  }
</style>

<!-- forsøg med js til fast header med cta farveskift -->
<script is:inline>
  window.addEventListener("DOMContentLoaded", () => {
    const navbar = document.querySelector(".navbar");

    const onScroll = () => {
      if (!navbar) return;
      navbar.classList.toggle("scrolled", window.scrollY > 50);
    };

    onScroll(); // så den også virker hvis man reloader midt på siden
    window.addEventListener("scroll", onScroll, { passive: true });
  });
</script>
